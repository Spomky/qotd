{% macro message(qotd) %}
    {% cache "qotd-message-#{qotd.id}" %}
        {# we use |raw before nl2br otherwise the content is escaped, and we don't want that #}
        {{ qotd.message|replace_emoji|replace_username|raw|nl2br|markdown_to_html }}
    {% endcache %}
{% endmacro %}
